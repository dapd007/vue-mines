webpackJsonp([1],{NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},n=s("VU/8")({name:"App"},a,!1,null,null,null).exports,l=s("/ocq"),c=(new i.a,{name:"difficulty-picker",props:{choices:{type:Array,required:!0},value:{type:Object}},data:function(){return{selectedDifficulty:{}}},mounted:function(){this.selectDifficulty(this.choices[0])},methods:{selectDifficulty:function(e){this.selectedDifficulty=e,this.$emit("input",this.selectedDifficulty)}}}),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[e._m(0),e._v(" "),s("div",{staticClass:"columns"},e._l(e.choices,function(t){return s("div",{staticClass:"column"},[s("div",{staticClass:"box difficulty-box",class:{"is-selected":t===e.selectedDifficulty},on:{click:function(s){e.selectDifficulty(t)}}},[s("span",{staticClass:"size"},[s("b",[e._v(e._s(t.columnsNumber)+" x "+e._s(t.rowsNumber))])]),e._v(" "),s("span",{staticClass:"mines"},[e._v(e._s(t.minesNumber)+" mines")])])])})),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column",staticStyle:{"text-align":"right"}},[s("button",{staticClass:"button is-primary",on:{click:function(t){e.$emit("picked")}}},[e._v("Play")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("h3",{staticClass:"title"},[this._v("Choose difficulty")])])])}]};var r={name:"game",components:{DifficultyPicker:s("VU/8")(c,o,!1,function(e){s("wd6V")},"data-v-16f67b54",null).exports},data:function(){return{isDifficultyPickerActive:!1,themes:[{label:"Dark",class:"dark-theme"},{label:"Light",class:""}],difficulties:[{rowsNumber:7,columnsNumber:10,minesNumber:15},{rowsNumber:12,columnsNumber:20,minesNumber:40},{rowsNumber:16,columnsNumber:30,minesNumber:99}],game:{settings:{},mines:[],rows:[],flagsCount:0,isCreated:!1,isOver:!1},selectedTheme:null}},mounted:function(){this.selectedTheme=this.themes[0],this.isDifficultyPickerActive=!0},methods:{changeDifficulty:function(){this.game.isSetUp=!1,this.isDifficultyPickerActive=!0},startGame:function(){this.game.isOver=!1,this.createBoard(),this.setMinesRandomly(),this.calculateCellMines(),this.game.isSetUp=!0,this.isDifficultyPickerActive=!1},createBoard:function(){this.game.mines=[],this.game.rows=[],this.game.flagsCount=0;for(var e=0;e<this.game.settings.rowsNumber;e++){for(var t=[],s=0;s<this.game.settings.columnsNumber;s++){var i={mineCount:0,row:e,column:s,isMine:!1,isFlagged:!1,isRevealed:!1};t.push(i)}this.game.rows.push(t)}},setMinesRandomly:function(){for(var e=this,t=0,s=function(){var s=Math.floor(Math.random()*e.game.settings.rowsNumber),i=Math.floor(Math.random()*e.game.settings.columnsNumber);0===e.game.mines.filter(function(e){return e.row===s&&e.column===i}).length&&(e.game.rows[s][i].isMine=!0,e.game.mines.push(e.game.rows[s][i]),t++)};t<this.game.settings.minesNumber;)s()},getAdjacentCells:function(e){for(var t=[],s=-1;s<=1;++s)for(var i=-1;i<=1;++i)0===s&&0===i||void 0!==this.game.rows[e.row+s]&&void 0!==this.game.rows[e.row+s][e.column+i]&&t.push(this.game.rows[e.row+s][e.column+i]);return t},calculateCellMines:function(){var e=this;this.game.mines.forEach(function(t){e.getAdjacentCells(t).forEach(function(e){e.isMine||e.mineCount++})})},getCellStyles:function(e){return 0!==e.mineCount&&e.isRevealed?{backgroundColor:["rgba(84,175,96,.35)","rgba(103,162,96,.35)","rgba(255,166,90,.35)","rgba(255,148,91,.35)","rgba(160,122,96,.35)","rgba(179,109,96,.35)","rgba(198,96,96,.35)","rgba(217,82,96,.35)","rgba(236,69,96,.35)"][e.mineCount-1]}:{}},checkWin:function(){this.game.flagsCount===this.game.mines.length&&(this.game.mines.filter(function(e){return e.isFlagged=!0}).length===this.game.flagsCount&&this.gameWon())},revealCell:function(e){this.game.isOver||e.isRevealed||e.isFlagged||(e.isRevealed=!0,e.isMine&&!e.isFlagged?this.gameLost():(this.revealAdjacent(e),this.checkWin()))},revealAdjacent:function(e){var t=this;!this.game.isOver&&e.isRevealed&&this.getAdjacentCells(e).forEach(function(e){e.isMine||e.isRevealed||(e.isRevealed=!0,0===e.mineCount&&t.revealAdjacent(e))})},handleDoubleClick:function(e){if(!this.game.isOver){var t=this.getAdjacentCells(e).filter(function(e){return e.isFlagged});if(t.length===e.mineCount)t.filter(function(e){return e.isMine}).length===t.length?this.revealAdjacent(e):this.gameLost()}},flagCell:function(e){e.isRevealed||(e.isFlagged=!e.isFlagged,e.isFlagged?this.game.flagsCount++:this.game.flagsCount--,this.checkWin())},gameWon:function(){var e=this;this.game.isOver=!0,this.revealAll(),this.$snackbar.open({message:"You won, yay!",type:"is-success",position:"is-top",actionText:"New game",duration:5e3,onAction:function(){e.startGame()}})},gameLost:function(){var e=this;this.game.isOver=!0,this.revealAll(),this.$snackbar.open({message:":( you just blew yourself up!",type:"is-danger",position:"is-top",actionText:"try again",duration:5e3,onAction:function(){e.startGame()}})},revealAll:function(){this.game.rows.forEach(function(e){e.forEach(function(e){e.isRevealed=!0})})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"game-page",class:e.selectedTheme?e.selectedTheme.class:""},[s("b-modal",{staticClass:"difficulty-modal",attrs:{active:e.isDifficultyPickerActive,"can-cancel":!1},on:{"update:active":function(t){e.isDifficultyPickerActive=t}}},[s("difficulty-picker",{attrs:{choices:e.difficulties},on:{picked:e.startGame},model:{value:e.game.settings,callback:function(t){e.$set(e.game,"settings",t)},expression:"game.settings"}})],1),e._v(" "),s("main",{staticClass:"game-container"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-10"},e._l(e.game.rows,function(t){return s("div",{staticClass:"columns game-row",on:{contextmenu:function(e){e.preventDefault()}}},e._l(t,function(t){return s("div",{key:t.row+"-"+t.column,staticClass:"column game-col"},[s("div",{staticClass:"ms-box",class:{"is-blank":0===t.mineCount&&!t.isMine,"is-flag":t.isFlagged,"is-mine":t.isMine,"is-revealed":t.isRevealed},style:e.getCellStyles(t),on:{dblclick:function(s){e.handleDoubleClick(t)},click:function(s){return"button"in s||!e._k(s.keyCode,"left",37,s.key,["Left","ArrowLeft"])?"button"in s&&0!==s.button?null:void e.revealCell(t):null},contextmenu:function(s){s.preventDefault(),e.flagCell(t)}}},[t.isRevealed?s("div",{staticClass:"cell-content"},[t.mineCount>0?s("span",{staticClass:"cell-number"},[e._v(e._s(t.mineCount))]):t.isMine?s("i",{staticClass:"fas fa-bomb"}):e._e()]):t.isFlagged?s("div",{staticClass:"cell-content"},[s("i",{staticClass:"fas fa-flag"})]):e._e()])])}))}))])]),e._v(" "),s("aside",{staticClass:"game-sidebar"},[e.game.isSetUp?[s("h3",{staticClass:"title is-4"},[e._v("Game")]),e._v(" "),s("div",{staticClass:"game-stats"},[s("p",[e._v("Size: "+e._s(e.game.settings.columnsNumber)+" x "+e._s(e.game.settings.rowsNumber))]),e._v(" "),s("p",[e._v("Mines: "+e._s(e.game.settings.minesNumber))]),e._v(" "),s("hr"),e._v(" "),s("p",[s("i",{staticClass:"fas fa-flag"}),e._v(e._s(e.game.flagsCount))])]),e._v(" "),s("div",{staticClass:"game-sidebar--blocks"},[e._m(0),e._v(" "),s("div",{staticClass:"sidebar-block"},[s("button",{staticClass:"button is-info",on:{click:e.startGame}},[e._v("Start over")]),e._v(" "),s("button",{staticClass:"button",on:{click:e.changeDifficulty}},[e._v("Change difficulty")]),e._v(" "),s("b-field",{attrs:{label:"Theme"}},[s("b-select",{attrs:{placeholder:"Pick a color theme",expanded:""},model:{value:e.selectedTheme,callback:function(t){e.selectedTheme=t},expression:"selectedTheme"}},e._l(e.themes,function(t){return s("option",{domProps:{value:t}},[e._v(e._s(t.label))])}))],1)],1)])]:e._e()],2)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sidebar-block"},[t("div",{staticClass:"sidebar-links"},[t("a",{attrs:{href:"https://github.com/dapd007/vue-mines",target:"_blank"}},[t("i",{staticClass:"fab fa-github"}),this._v(" Source code")])])])}]};var m=s("VU/8")(r,u,!1,function(e){s("xW2u")},null,null).exports;i.a.use(l.a);var f=new l.a({routes:[{path:"/",name:"Game",component:m}]}),g=s("MMSg"),d=s.n(g);s("doPI");i.a.config.productionTip=!1,i.a.use(d.a,{defaultIconPack:"fas"}),new i.a({el:"#app",router:f,components:{App:n},template:"<App/>"})},doPI:function(e,t){},wd6V:function(e,t){},xW2u:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b0c56a31c8c174bd8709.js.map